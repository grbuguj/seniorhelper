<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>만 나이 계산 결과 - 어르신 생활도우미</title>

    <!-- 공통 스타일 -->
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/age.css">

</head>

<body>

<div class="result-wrapper">

    <h1 class="page-title">만 나이 계산 결과</h1>
    <p class="page-subtitle" id="subtitleText"></p>

    <!-- 카드 1: 만 나이 -->
    <div class="result-card">
        <div class="result-title">만 나이</div>

        <div class="result-line">
            만 나이는 <span class="highlight" id="mAge"></span>입니다.
        </div>
    </div>

    <!-- 카드 2: 태어난 해 정보 -->
    <div class="result-card">
        <div class="result-title">태어난 해 정보</div>

        <div class="result-line">
            <span class="highlight" id="birthAnimal"></span>
        </div>

        <div class="result-line">
            <span class="highlight" id="birthGanji"></span>
        </div>
    </div>

    <!-- 카드 3: 올해 정보 -->
    <div class="result-card">
        <div class="result-title" id="yearTitle"></div>

        <div class="result-line">
            <span class="highlight" id="yearAnimalLine"></span>
        </div>

        <div class="result-line">
            <span class="highlight" id="yearGanjiLine"></span>
        </div>
    </div>

    <!-- 관련 버튼 -->
    <div style="text-align:center; font-size:30px; margin-top:28px;">
        <span id="birthYearTitle"></span> 관련
    </div>

    <div style="display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin-top:16px;">
        <button class="small-nav-btn" onclick="location.href='/age/'">한국 나이</button>
        <button class="small-nav-btn" onclick="location.href='/zodiac/'">띠궁합</button>
        <button class="small-nav-btn" onclick="location.href='/articles/'">연예인</button>
        <button class="small-nav-btn" onclick="location.href='/age/table.html'">나이표</button>
        <button class="small-nav-btn" onclick="location.href='/school/'">학교</button>
        <button class="small-nav-btn" onclick="location.href='/holiday/'">공휴일</button>
    </div>

    <button class="back-main-btn" onclick="location.href='/'">홈으로</button>

</div>


<script>
    const params = new URLSearchParams(location.search);

    const year = Number(params.get("year"));
    const month = params.get("month") ? Number(params.get("month")) : 1;
    const day = params.get("day") ? Number(params.get("day")) : 1;

    const CURRENT_YEAR = new Date().getFullYear();
    const TODAY = new Date();
    const birthdayThisYear = new Date(CURRENT_YEAR, month - 1, day);

    /* ------------------- 만 나이 계산 ------------------- */
    let manAge = CURRENT_YEAR - year;
    if (TODAY < birthdayThisYear) manAge--;

    document.getElementById("mAge").innerText = manAge + "세";

    document.getElementById("birthYearTitle").innerText = `${year}년`;
    document.getElementById("subtitleText").innerText =
        `${CURRENT_YEAR}년 기준 ${year}년생의 만 나이 정보입니다.`;

    /* ------------------- 띠 / 간지 ------------------- */

    const animals = ["원숭이","닭","개","돼지","쥐","소",
        "호랑이","토끼","용","뱀","말","양"];

    const gan = [
        ["갑","甲"], ["을","乙"], ["병","丙"], ["정","丁"], ["무","戊"],
        ["기","己"], ["경","庚"], ["신","辛"], ["임","壬"], ["계","癸"]
    ];

    const ji = [
        ["자","子"], ["축","丑"], ["인","寅"], ["묘","卯"], ["진","辰"], ["사","巳"],
        ["오","午"], ["미","未"], ["신","申"], ["유","酉"], ["술","戌"], ["해","亥"]
    ];

    // 출생 띠
    const birthAnimal = animals[year % 12] + "띠입니다.";

    // 출생 간지
    const birthGanji =
        `${gan[(year - 4) % 10][0]}${ji[(year - 4) % 12][0]}년 (${gan[(year - 4) % 10][1]}${ji[(year - 4) % 12][1]})년입니다.`;

    // 올해 띠
    const yearAnimal = `${CURRENT_YEAR}년은 ${animals[CURRENT_YEAR % 12]}띠 해입니다.`;

    // 올해 간지
    const yearGanji =
        `${CURRENT_YEAR}년은 ${gan[(CURRENT_YEAR - 4) % 10][0]}${ji[(CURRENT_YEAR - 4) % 12][0]}년 (${gan[(CURRENT_YEAR - 4) % 10][1]}${ji[(CURRENT_YEAR - 4) % 12][1]})년입니다.`;

    document.getElementById("birthAnimal").innerText = birthAnimal;
    document.getElementById("birthGanji").innerText = birthGanji;

    document.getElementById("yearTitle").innerText = `${CURRENT_YEAR}년 정보`;
    document.getElementById("yearAnimalLine").innerText = yearAnimal;
    document.getElementById("yearGanjiLine").innerText = yearGanji;
</script>

</body>
</html>
