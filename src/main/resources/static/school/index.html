<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>학교 입학·졸업 계산기</title>
    <link rel="stylesheet" href="../css/base.css">

    <style>
        .input-box {
            background: var(--card);
            padding: 26px;
            border-radius: 16px;
            border: 2px solid var(--border);
            margin-top: 20px;
        }
        .input-title {
            font-size: 30px;
            text-align: center;
            margin-bottom: 14px;
        }
        .big-input {
            width: 100%;
            padding: 18px;
            font-size: 28px;
            border-radius: 14px;
            border: 2px solid var(--border);
            text-align: center;
        }
        .btn-main {
            width: 100%;
            padding: 22px;
            margin-top: 20px;
            font-size: 30px;
            border-radius: 14px;
            border: none;
            background: var(--primary);
            color: white;
        }
        .result-card {
            background: var(--card);
            padding: 26px;
            margin-top: 26px;
            border-radius: 16px;
            border: 2px solid var(--border);
            font-size: 28px;
            line-height: 1.6;
        }
        .highlight {
            color: var(--primary);
            font-weight: 600;
        }
        table {
            width: 100%;
            margin-top: 14px;
            font-size: 26px;
            border-collapse: collapse;
        }
        th, td {
            border: 2px solid var(--border);
            padding: 10px;
            text-align: center;
        }

        /* zodiac */
        .zodiac-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 14px;
        }
        .zodiac-grid button {
            padding: 20px 0;
            font-size: 26px;
            border: 2px solid var(--primary);
            border-radius: 14px;
            background: white;
        }
        .cand-year-btn {
            margin: 6px;
            padding: 14px 18px;
            font-size: 24px;
            border-radius: 12px;
            border: 2px solid var(--primary);
            background: white;
        }

        .info-box {
            background: var(--card);
            padding: 26px;
            border-radius: 16px;
            border: 1px solid var(--border);
            margin-top: 40px;
            font-size: 26px;
            line-height: 1.55;
        }
        .sub-btns {
            margin-top: 30px;
            display: flex;
            flex-wrap: wrap;
            gap: 14px;
            justify-content: center;
        }
        .small-btn {
            padding: 18px 26px;
            font-size: 26px;
            border-radius: 12px;
            border: 2px solid var(--primary);
            background: white;
        }
    </style>
</head>

<body>
<div class="page">

    <a href="../index.html" class="back-btn">←</a>

    <h1 class="page-title">학교 입학·졸업 계산기</h1>

    <div class="input-box">
        <div class="input-title">출생 연도</div>
        <input id="birthYearOnly" type="number" placeholder="예: 2018" class="big-input">

        <div style="text-align:center; font-size:24px; margin:14px 0;">또는</div>

        <div class="input-title">출생 날짜</div>
        <input id="birthDateFull" type="date" class="big-input">

        <button class="btn-main" onclick="calc()">계산하기</button>
    </div>

    <!-- 띠 선택 안내 -->
    <div style="margin-top:32px; font-size:30px; font-weight:600;">
        혹시 연도가 기억나지 않으신가요?
    </div>

    <div class="input-box">
        <div style="font-size:26px; margin-bottom:12px; color:var(--text-sub);">
            태어난 띠를 누르시면 가능한 출생 연도가 아래에 나옵니다.
        </div>

        <!-- 12띠 -->
        <div class="zodiac-grid">
            <button onclick="selectZodiac('쥐')">쥐띠</button>
            <button onclick="selectZodiac('소')">소띠</button>
            <button onclick="selectZodiac('호랑이')">호랑이띠</button>
            <button onclick="selectZodiac('토끼')">토끼띠</button>

            <button onclick="selectZodiac('용')">용띠</button>
            <button onclick="selectZodiac('뱀')">뱀띠</button>
            <button onclick="selectZodiac('말')">말띠</button>
            <button onclick="selectZodiac('양')">양띠</button>

            <button onclick="selectZodiac('원숭이')">원숭이띠</button>
            <button onclick="selectZodiac('닭')">닭띠</button>
            <button onclick="selectZodiac('개')">개띠</button>
            <button onclick="selectZodiac('돼지')">돼지띠</button>
        </div>

        <div id="yearList" style="margin-top:20px; font-size:26px;"></div>
    </div>

    <div id="results"></div>

    <div class="info-box">
        <div style="font-size:30px; margin-bottom:10px;">한국의 학교 입학 기준</div>

        한국은 6-3-3 학제를 사용합니다.<br><br>
        • 초등학교 6년<br>
        • 중학교 3년<br>
        • 고등학교 3년<br><br>

        초등학교 입학 기준은 <span class="highlight">만 6세가 되는 해</span>입니다.<br>
        같은 해에 태어난 아이들은 모두 같은 해에 초등학교에 입학합니다.<br><br>

        이 계산기는 손주가 <span class="highlight">지금 몇 학년인지</span>,
        앞으로 <span class="highlight">언제 초·중·고를 입학하고 졸업하는지</span>를 알려드립니다.
    </div>

    <div class="sub-btns">
        <button class="small-btn" onclick="location.href='../dday/index.html'">디데이 계산기</button>
        <button class="small-btn" onclick="location.href='../date-diff/index.html'">날짜 차이 계산기</button>
        <button class="small-btn" onclick="location.href='../date-plusminus/index.html'">날짜 더하기·빼기</button>
        <button class="small-btn" onclick="location.href='../index.html'">메인 화면</button>
    </div>

</div>

<script>
    /* =======================
        출생연도 → 계산 실행
    ======================== */
    function calc(yearOverride = null) {
        let year = yearOverride;

        if (!year) {
            const yOnly = document.getElementById("birthYearOnly").value;
            const full = document.getElementById("birthDateFull").value;

            if (full) {
                year = new Date(full).getFullYear();
            } else if (yOnly) {
                year = Number(yOnly);
            } else {
                return alert("출생 정보를 입력해주세요.");
            }
        }

        const currentYear = 2025;
        const age = currentYear - year;

        const grade = age - 6 + 1;

        function gradeText(g) {
            if (g < 1) return "아직 학생이 아닙니다.";
            if (g <= 6) return `초등학교 ${g}학년`;
            if (g <= 9) return `중학교 ${g-6}학년`;
            if (g <= 12) return `고등학교 ${g-9}학년`;
            return "학교를 졸업한 연령입니다.";
        }

        const elementaryEnter = year + 6;
        const elementaryGrad = elementaryEnter + 6;

        const middleEnter = elementaryGrad;
        const middleGrad = middleEnter + 3;

        const highEnter = middleGrad;
        const highGrad = highEnter + 3;

        const univEnter = highGrad;

        document.getElementById("results").innerHTML = `
            <div class="result-card">
                <div><span class="highlight">${year}</span>년생의 2025년 기준 나이는 <span class="highlight">${age}세</span>입니다.</div>
                <div style="margin-top:14px;">현재 학년: <span class="highlight">${gradeText(grade)}</span></div>

                <table>
                    <tr><th>구분</th><th>입학</th><th>졸업</th></tr>
                    <tr><td>초등학교</td><td>${elementaryEnter}</td><td>${elementaryGrad}</td></tr>
                    <tr><td>중학교</td><td>${middleEnter}</td><td>${middleGrad}</td></tr>
                    <tr><td>고등학교</td><td>${highEnter}</td><td>${highGrad}</td></tr>
                    <tr><td>대학교</td><td>${univEnter}</td><td>-</td></tr>
                </table>
            </div>
        `;
    }

    /* =======================
        띠 선택 → 연도 후보 표시
    ======================== */

    const CURRENT_YEAR = new Date().getFullYear();

    const zodiacOrder = {
        "쥐": 4, "소": 5, "호랑이": 6, "토끼": 7,
        "용": 8, "뱀": 9, "말": 10, "양": 11,
        "원숭이": 0, "닭": 1, "개": 2, "돼지": 3
    };

    function selectZodiac(zodiac) {
        const targetIdx = zodiacOrder[zodiac];
        const years = [];

        for (let y = CURRENT_YEAR - 120; y <= CURRENT_YEAR; y++) {
            if (y % 12 === targetIdx) years.push(y);
        }

        const box = document.getElementById("yearList");

        box.innerHTML =
            `<div style="font-size:28px; color:var(--primary); font-weight:600; margin-bottom:12px;">
                가능한 출생 연도
             </div>` +
            years
                .map(y => `<button class="cand-year-btn" onclick="calc(${y})">${y}년</button>`)
                .join("");
    }
</script>

</body>
</html>
