<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë ê¶í•© í™•ì¸</title>
    <link rel="stylesheet" href="../css/base.css">

    <style>
        .title-large { font-size: 32px; margin-bottom: 18px; }
        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }
        .zbtn {
            padding: 22px 10px;
            background: var(--card);
            border: 2px solid var(--border);
            border-radius: 14px;
            font-size: 26px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .zbtn.selected {
            border: 3px solid var(--primary);
            background: var(--primary-soft);
            font-weight: 700;
            color: var(--primary);
        }
        .input-box {
            background: var(--card);
            padding: 24px;
            border-radius: 16px;
            border: 1px solid var(--border);
            margin-top: 20px;
            text-align: center;
        }
        .year-input {
            width: 170px;
            padding: 14px;
            font-size: 30px;
            text-align: center;
            border: 2px solid var(--border);
            border-radius: 12px;
        }
        .go-btn {
            width: 100%;
            padding: 18px;
            margin-top: 20px;
            border: none;
            border-radius: 12px;
            font-size: 28px;
            background: var(--primary);
            color: white;
        }
    </style>
</head>

<body>
<div class="page">
    <a href="index.html" class="back-btn">â†</a>
    <div class="page-title">ë ê¶í•© í™•ì¸</div>

    <div class="title-large">ì²« ë²ˆì§¸ ì‚¬ëŒì˜ ë ë¥¼ ì„ íƒí•˜ì„¸ìš”</div>

    <div class="grid" id="p1"></div>

    <div class="input-box">
        <div style="font-size: 24px;">ë ë¥¼ ëª¨ë¥´ì‹œë‚˜ìš”?</div>
        <input id="y1" class="year-input" placeholder="1950"> ë…„
        <button class="go-btn" onclick="setByYear(1)">í™•ì¸</button>
    </div>

    <hr style="margin: 30px 0;">

    <div class="title-large">ë‘ ë²ˆì§¸ ì‚¬ëŒì˜ ë ë¥¼ ì„ íƒí•˜ì„¸ìš”</div>

    <div class="grid" id="p2"></div>

    <div class="input-box">
        <div style="font-size: 24px;">ë ë¥¼ ëª¨ë¥´ì‹œë‚˜ìš”?</div>
        <input id="y2" class="year-input" placeholder="1950"> ë…„
        <button class="go-btn" onclick="setByYear(2)">í™•ì¸</button>
    </div>

    <button class="go-btn" onclick="goResult()">ê¶í•© í™•ì¸í•˜ê¸°</button>
</div>

<script>
    const animals = ["ì¥","ì†Œ","í˜¸ë‘ì´","í† ë¼","ìš©","ë±€","ë§","ì–‘","ì›ìˆ­ì´","ë‹­","ê°œ","ë¼ì§€"];
    const emojis  = ["ğŸ­","ğŸ®","ğŸ¯","ğŸ°","ğŸ²","ğŸ","ğŸ´","ğŸ‘","ğŸµ","ğŸ”","ğŸ¶","ğŸ·"];

    let p1 = null, p2 = null;

    function renderButtons(target, who) {
        document.getElementById(target).innerHTML =
            animals.map((a,i)=>`
                <button class="zbtn" id="${who}-${i}"
                    onclick="select('${who}', '${a}', '${emojis[i]}', ${i})">
                    ${emojis[i]}<br>${a}
                </button>
            `).join("");
    }
    renderButtons("p1", "p1");
    renderButtons("p2", "p2");

    function clearSelection(who) {
        animals.forEach((_,i)=>{
            document.getElementById(`${who}-${i}`).classList.remove("selected");
        });
    }

    function select(who, animal, emoji, index){
        if(who==="p1") p1=[animal,emoji];
        else p2=[animal,emoji];

        clearSelection(who);
        document.getElementById(`${who}-${index}`).classList.add("selected");
    }

    function setByYear(who){
        const y = who===1 ? document.getElementById("y1").value : document.getElementById("y2").value;
        if(!y) return alert("ì—°ë„ë¥¼ ì…ë ¥í•˜ì„¸ìš”");
        const idx = (y-4)%12;
        const a = animals[idx], e = emojis[idx];

        if(who===1) p1=[a,e];
        else p2=[a,e];

        clearSelection("p"+who);
        document.getElementById(`p${who}-${idx}`).classList.add("selected");
        alert(a+"ë ë¡œ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    function goResult(){
        if(!p1 || !p2) return alert("ë‘ ë¶„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.");
        location.href = `compatibility-result.html?a1=${p1[0]}&e1=${p1[1]}&a2=${p2[0]}&e2=${p2[1]}`;
    }
</script>
</body>
</html>
